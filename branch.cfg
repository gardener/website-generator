cfgs:
  default:
    index: 0
    branches: ['master|rc|release-v.*']
    inherit:
      gardener-website-generator:
        template: 'default'
        base_definition:
          repo:
            name: 'gardener_website_generator'
            trigger: true
          repos:
          - name: 'gardener_website'
            path: 'gardener/website'
            branch: 'master'
            cfg_name: 'github_com'
          - name: 'gardener_documentation'
            path: 'gardener/documentation'
            branch: 'master'
            cfg_name: 'github_com'
            trigger: true
        jobs:
          head-update:
            steps:
              build:
                image: 'eu.gcr.io/gardener-project/gardener-website-generator:10.0.1'
                publish_to: ['gardener_website', 'gardener_documentation']
            traits:
              cronjob:
                interval: '24h'

  test_update:
    index: 1
    branches: ['test_update']
    inherit:
      gardener-website-generator:
        template: 'default'
        base_definition:
          repo:
            name: 'gardener_website_generator'
            trigger: true
          repos:
          - name: 'gardener_website'
            path: 'gardener/website'
            branch: 'test_update'
            cfg_name: 'github_com'
          - name: 'gardener_documentation'
            path: 'gardener/documentation'
            branch: 'test_update'
            cfg_name: 'github_com'
            trigger: true
        jobs:
          head-update:
            steps:
              build:
                image: 'eu.gcr.io/gardener-project/gardener-website-generator:10.0.1'
                publish_to: ['gardener_website', 'gardener_documentation']
          documentation-release:
            traits:
              component_descriptor: ~
              update_component_deps:
                merge_policy: auto_merge
              cronjob:
                interval: '15m'
              version: ~
            steps:
              build:
                image: 'eu.gcr.io/gardener-project/gardener-website-generator:10.0.1'
                publish_to: ['gardener_website', 'gardener_documentation']
                depends:
                - update_component_deps